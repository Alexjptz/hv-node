# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ v-–Ω–æ–¥—ã ‚Äî –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–π –Ω–æ–¥—ã. –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–ª—è—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞

–ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∞–¥–º–∏–Ω–∞ –∏–ª–∏ –≤–æ–∑—å–º–∏—Ç–µ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ì–¥–µ –≤–∑—è—Ç—å | –ü—Ä–∏–º–µ—Ä |
|----------|-----------|--------|
| **CORE_API_URL** | –ê–¥—Ä–µ—Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å API | `https://api.example.com:8000` |
| **CORE_API_IP** | IP –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ | `1.2.3.4` |
| **AGENT_API_KEY** | –ü–∞–Ω–µ–ª—å ‚Üí –°–µ—Ä–≤–µ—Ä—ã ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä | –î–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä |
| **SERVER_ID** | –ü–∞–Ω–µ–ª—å ‚Üí –°–µ—Ä–≤–µ—Ä—ã ‚Üí ID —Å–µ—Ä–≤–µ—Ä–∞ | `1` |

–¢–∞–∫–∂–µ –Ω—É–∂–µ–Ω VPS —Å Ubuntu –∏ –¥–æ—Å—Ç—É–ø –ø–æ SSH (–ª–æ–≥–∏–Ω `root`).

---

## –®–∞–≥ 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (–ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞):

```
ssh root@IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê
```

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç.

---

## –®–∞–≥ 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ü–µ–ª–∏–∫–æ–º:

```
curl -sSL https://raw.githubusercontent.com/Alexjptz/hv-node/main/install-vpn-server.sh | bash
```

–°–∫—Ä–∏–ø—Ç –∑–∞–¥–∞—Å—Ç –≤–æ–ø—Ä–æ—Å—ã. –í–æ—Ç —á—Ç–æ –ø–∏—Å–∞—Ç—å:

| –í–æ–ø—Ä–æ—Å | –ß—Ç–æ –≤–≤–æ–¥–∏—Ç—å |
|--------|-------------|
| **CORE_API_URL** | –ê–¥—Ä–µ—Å API (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://api.example.com:8000`) |
| **CORE_API_IP** | IP –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ |
| **AGENT_API_KEY** | –ö–ª—é—á –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ |
| **SERVER_ID** | ID —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ |

–û—Å—Ç–∞–ª—å–Ω–æ–µ (–ø—É–±–ª–∏—á–Ω—ã–π IP) –æ–±—ã—á–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5‚Äì10 –º–∏–Ω—É—Ç.

---

## –®–∞–≥ 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–í –∫–æ–Ω—Ü–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–ø—Ä–æ—Å:

> **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (security-setup.sh) —Å–µ–π—á–∞—Å? (y/N)**

### ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º ¬´y¬ª:

**–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ö–æ–¥ –ø–æ SSH-–∫–ª—é—á—É.**

–ï—Å–ª–∏ –≤—Ö–æ–¥ –ø–æ –∫–ª—é—á—É –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Äî –Ω–∞–∂–º–∏—Ç–µ **N**, —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSH-–∫–ª—é—á–∞ –∏ –ø–æ–∑–∂–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```
cd /root/hv-node
sudo ./security-setup.sh --prod
```

–ï—Å–ª–∏ –≤—Ö–æ–¥ –ø–æ –∫–ª—é—á—É —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Å–º–µ–ª–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ **y**.

---

## –®–∞–≥ 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

```
cd /root/hv-node
docker compose ps
```

–û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ **Up**.

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≥–µ–Ω—Ç–∞:

```
curl http://localhost:8080/health
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: `{"status":"healthy","service":"xray-agent"}`.

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|----------|
| –ê–≥–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORE_API_URL –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ |
| –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –ø–æ SSH –ø–æ—Å–ª–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | –í—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é –æ—Ç–∫–ª—é—á—ë–Ω. –ù—É–∂–µ–Ω SSH-–∫–ª—é—á |
| –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è | –ó–∞–ø—É—Å—Ç–∏—Ç–µ `docker compose logs` –∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –≤—ã–≤–æ–¥ –∞–¥–º–∏–Ω—É |

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è)

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|----------|---------|
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å | `cd /root/hv-node && docker compose ps` |
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ | `cd /root/hv-node && docker compose logs -f` |
| –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å | `cd /root/hv-node && docker compose restart` |

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ.** –°–µ—Ä–≤–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –≥–æ—Ç–æ–≤ —Ä–∞–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
